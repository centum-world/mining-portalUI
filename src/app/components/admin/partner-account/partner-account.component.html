<div class="account-header">
  <h5
    style="
      display: flex;
      justify-content: center;
      align-items: center;
      width: max-content;
      cursor: pointer;
    "
  >
    <mat-icon (click)="goBack()">arrow_back</mat-icon>&nbsp; Partner Account
    details
  </h5>
  <mat-card class="result">
    <mat-card-content>
      <!-- <h5 class="example-h2">Referral Payout</h5> -->

      <section class="example-section">
        <mat-slide-toggle
          class="example-margin"
          [color]="color"
          [checked]="checked"
          [disabled]="disabled"
          (change)="onSlideToggleChange()"
        >
          Referral Payout
        </mat-slide-toggle>
      </section>
    </mat-card-content>
  </mat-card>
</div>
<div class="account-content" *ngIf="!checked">
  <mat-tab-group
    animationDuration="2000ms"
    class="example-stretched-tabs"
    (selectedIndexChange)="tabChanged($event)"
  >
    <mat-tab label="Pay">
      <div style="display: flex; justify-content: center; align-items: center">
        <mat-card class="payment-card">
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Monthly payout</mat-card-title>
            <mat-card-subtitle>{{ partnerID }}</mat-card-subtitle>
          </mat-card-header>

          <mat-card-content>
            <form>
              <div
                class="transaction"
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <mat-form-field>
                  <mat-label>Select amount</mat-label>
                  <mat-select (selectionChange)="onSelectChange($event)">
                    <mat-option [value]="perDayAmountDropDown">
                      {{ perDayAmountDropDown | currency : "INR" }}
                    </mat-option>
                    <mat-option [value]="februaryAmount">
                      {{ februaryAmount | currency : "INR" }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <input
                    matInput
                    [matDatepicker]="picker"
                    placeholder="Choose a date"
                    (dateChange)="onDateSelected($event)"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="picker"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </div>
            </form>
          </mat-card-content>
          <mat-card-actions align="end">
            <button mat-raised-button type="button">Cancel</button>
            <button
              mat-raised-button
              type="submit"
              [disabled]="!status"
              (click)="payNow()"
              color="primary"
            >
              Pay now
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </mat-tab>
    <mat-tab label="Request withdrawal">
      <div class="bakk-div">
        <!-- Check if partnerRequestHistory is empty -->
        <ng-container
          *ngIf="partnerRequestHistory.length === 0; else partnerRequestList"
        >
          <mat-card class="example-card">
            <mat-card-content>
              <p>No request withdrawals found.</p>
            </mat-card-content>
          </mat-card>
        </ng-container>

        <!-- Display the list of request withdrawals if partnerRequestHistory is not empty -->
        <ng-template #partnerRequestList>
          <mat-card
            class="example-card"
            *ngFor="let data of partnerRequestHistory"
          >
            <mat-card-header>
              <div mat-card-avatar class="example-header-image"></div>
              <mat-card-title>Bank details</mat-card-title>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content class="single-line-content">
              <div class="bank-details">
                <h2>Id</h2>
                <strong>{{ partnerID }} </strong>
              </div>
              <div class="bank-details">
                <h2>Amount</h2>
                <strong>{{
                  data.partner_wallet | currency : "INR" : "symbol" : "1.2-2"
                }}</strong>
              </div>
              <div class="bank-details">
                <h2>Request date</h2>
                <strong>{{ data.request_date | date }} </strong>
              </div>
            </mat-card-content>
            <mat-divider></mat-divider>
            <mat-card-actions>
              <button mat-button style="background: rgb(87, 251, 87)">
                Request
              </button>
              <button
                mat-button
                style="background: red"
                (click)="approved(data.id)"
              >
                Approve
              </button>
            </mat-card-actions>
          </mat-card>
        </ng-template>
      </div>
    </mat-tab>
    <mat-tab label="Approved withdrawal">
      <div class="bakk-div">
        <!-- Check if approvedRequest is empty -->
        <ng-container
          *ngIf="approvedRequest.length === 0; else approvedRequestList"
        >
          <mat-card class="example-card">
            <mat-card-content>
              <p>No approved withdrawals found.</p>
            </mat-card-content>
          </mat-card>
        </ng-container>

        <!-- Display the list of approved withdrawals if approvedRequest is not empty -->
        <ng-template #approvedRequestList>
          <mat-card class="example-card" *ngFor="let data of approvedRequest">
            <mat-card-header>
              <div mat-card-avatar class="example-header-image"></div>
              <mat-card-title>Bank details</mat-card-title>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content class="single-line-content">
              <div class="bank-details">
                <h2>Id</h2>
                <strong>{{ data.p_userid }} </strong>
              </div>
              <div class="bank-details">
                <h2>Amount</h2>
                <strong>{{
                  data.partner_wallet | currency : "INR" : "symbol" : "1.2-2"
                }}</strong>
              </div>
              <div class="bank-details">
                <h2>Request date</h2>
                <strong>{{ data.request_date | date }} </strong>
              </div>
              <div class="bank-details">
                <h2>Approved date</h2>
                <strong>{{ data.approve_date | date }} </strong>
              </div>
            </mat-card-content>
            <mat-divider></mat-divider>
            <mat-card-actions>
              <button mat-button style="background: rgb(0, 255, 38)">
                Approved successful
              </button>
            </mat-card-actions>
          </mat-card>
        </ng-template>
      </div>
    </mat-tab>
    <mat-tab label="Bank details">
      <div class="bakk-div">
        <!-- Check if bankDetails is empty -->
        <ng-container *ngIf="bankDetails.length === 0; else bankDetailsList">
          <mat-card class="example-card">
            <mat-card-content>
              <p>No bank details found.</p>
            </mat-card-content>
          </mat-card>
        </ng-container>

        <!-- Display the list of bank details if bankDetails is not empty -->
        <ng-template #bankDetailsList>
          <mat-card class="example-card" *ngFor="let data of bankDetails">
            <mat-card-header>
              <div mat-card-avatar class="example-header-image"></div>
              <mat-card-title>Bank details</mat-card-title>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content class="single-line-content">
              <div class="bank-details">
                <h2>Holder name</h2>
                <strong>{{ data.holder_name }} </strong>
              </div>
              <div class="bank-details">
                <h2>Bank name</h2>
                <strong>{{ data.bank_name }}</strong>
              </div>
              <div class="bank-details">
                <h2>Branch name</h2>
                <strong>{{ data.branch_name }}</strong>
              </div>
              <div class="bank-details">
                <h2>Account name</h2>
                <strong>{{ data.account_no }} </strong>
              </div>
              <div class="bank-details">
                <h2>IDSC Code</h2>
                <strong>{{ data.ifsc_code }} </strong>
              </div>
            </mat-card-content>
            <mat-divider></mat-divider>
            <mat-card-actions>
              <button mat-button>Active</button>
              <button mat-button>UPI</button>
            </mat-card-actions>
          </mat-card>
        </ng-template>
      </div>
    </mat-tab>
    <mat-tab label="Payout History">
      <div style="display: flex; justify-content: center; align-items: center">
        <mat-card class="partner-history-card">
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Payment history</mat-card-title>
            <mat-card-subtitle>{{ partnerID }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="container">
              <div class="column">
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>Date of Payment</span>
                  <strong>{{ partnerDetails.dop | date }}</strong>
                </div>
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>Total liquidity</span>
                  <strong>{{
                    partnerDetails.liquidity | currency : "INR"
                  }}</strong>
                </div>
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>Payout Tenure</span> <strong>12 TN</strong>
                </div>
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>Paid Tenure</span>
                  <strong>{{ partnerDetails.monthComplete }} TN</strong>
                </div>
              </div>
              <div class="column">
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>Remaining Tenure</span>
                  <strong
                    >{{ 12 - partnerDetails.monthComplete }}&nbsp;TN</strong
                  >
                </div>
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>Last Payout</span>
                  <strong>{{ partnerDetails.lastPaymentDate | date }}</strong>
                </div>
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>Next Payout</span>
                  <strong>15 to 22nd (Of every month)</strong>
                </div>
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>Status</span>
                  <strong>{{
                    partnerDetails.status ? "Active" : "Close"
                  }}</strong>
                </div>
              </div>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button
              mat-button
              type="button"
              [style.background]="partnerDetails.status ? '#93fb48' : '#c41111'"
              mat-raised-button
            >
              {{ partnerDetails.status ? "ACTIVE" : "CLOSE" }}
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </mat-tab>
    <mat-tab label="Bond">
      <button mat-raised-button color="primary" (click)="downloadPdf()" [disabled]="!pdfButton">Download</button>
      <div
        style="
          display: flex;
          justify-content: center;
          align-items: center;
          margin-top: 10px;
        "
      >
        <div
          #contentToConvert
          [ngClass]="{ 'hidden-content': hideContent }"
          class="pdf-container"
        >
          <div class="date-heading">Date: {{paymentDate|date}}</div>

          <div style="margin-bottom: 10px">
            <img
              src="../../../../assets/image/heading.png"
              alt=""
              class="image-div"
            />
          </div>
          <div class="user-name">
            <div class="user-id">
              <p>To,</p>
              <p>{{fname}}&nbsp;{{lname}}</p>
              <p>USER ID-</p>
              <p>{{partnerID}}</p>
            </div>
            <div class="company-name">
              <p>CENTUM WORLD</p>
              <p>GSTIN:19AAQFC7963A1Z5</p>
              <p style="font-size: smaller; font-weight: 100">
                worldcentum@gmail.com
              </p>
            </div>
          </div>
          <div class="sub-div">
            <p style="font-size: 10px; font-weight: 100">
              Sub: SaaS-Software as a Service
            </p>
            <p style="font-size: 10px; font-weight: 100">
              IaaS-Infrastructure as a Service
            </p>
            <p style="color: #2a2c96; font-weight: 500; font-size:10px">
              INVOICE# 00227
            </p>
          </div>
            <div class="description">
              <p style="font-size: 10px; font-weight: 500">
                DESCRIPTION/FEATURES
              </p>
              <div class="price-total">
                <p style="font-size: 10px; font-weight: 500">PRICE</p>
                <P style="font-size: 10px; font-weight: 500">TOTAL</P>
              </div>
          </div>
          <mat-divider class="custom-divider"></mat-divider>
          <div class="description">
            <div style="line-height: 1px; margin-top: 2px">
              <p style="font-size: 12px; font-weight: 600">Price List</p>
              <p style="font-size: 10px; font-weight: 500">
                1.Software as a Service(SaaS)
              </p>
              <p style="font-size: 10px; font-weight: 500">
                2.<strong>GPU RIG</strong> Configuration and
              </p>
              <p style="font-size: 10px; font-weight: 500">
                Infrastructure as a Service(IaaS)
              </p>
            </div>
            <div class="price-total">
              <p style="font-size: 12px; font-weight: 600">{{(liquidity - percentage) | currency: 'INR': 'symbol':'1.0-0' }}</p>
              <P style="font-size: 12px; font-weight: 600">{{(liquidity - percentage) | currency: 'INR': 'symbol':'1.0-0' }}</P>
            </div>
          </div>

          <div class="description" style="margin-top: 20px">
            <div style="line-height: 1px;">
              <p style="font-size: 12px; font-weight: 600">Category 1</p>
              <p style="font-size: 10px; font-weight: 500">
                12 Months basic Subscription
              </p>
              <p style="font-size: 10px; font-weight: 500">
                1.Installation charge
              </p>
              <p style="font-size: 10px; font-weight: 500">
                2.Mainteinance charge
              </p>
              <p style="font-size: 10px; font-weight: 500">
                3.24*7 Online Support
              </p>
            </div>
          </div>
          <mat-divider class="custom-divider"></mat-divider>
          <div class="description">
            <div style="line-height: 1px; margin-top: 2px"></div>
            <div class="price-total">
              <div style="line-height: 1px">
                <p style="font-size: 12px; font-weight: 600">TOTAL</p>
                <p style="font-size: 12px; font-weight: 600">GST 18%</p>
                <p style="font-size: 12px; font-weight: 600">
                  Net Payable Amount
                </p>
              </div>
              <div style="line-height: 1px">
                <p style="font-size: 12px; font-weight: 600">Rs. {{(liquidity - percentage) | currency: 'INR': 'symbol':'1.0-0' }}/-</p>
                <p style="font-size: 12px; font-weight: 600">Rs. {{ percentage | currency: 'INR': 'symbol':'1.0-0' }}/-</p>
                <p style="font-size: 12px; font-weight: 600">
                  Rs. {{ liquidity | currency: 'INR': 'symbol':'1.0-0' }}/-
                </p>
              </div>
            </div>
          </div>

          <div style="line-height: 1px">
            <p style="font-size: 10px">
              Installation, Security implementation and free
            </p>
            <p style="font-size: 10px">
              maintenance upto 12 Months from the
            </p>
            <p style="font-size: 10px">Subscription data.</p>
          </div>
          <br/>
          <div class="payment-successful">
            <p style="color: #2a2c96; font-size: 10px; font-weight: 600">
              PAYMENT INFORMATION
            </p>
            <p style=" font-size: 10px; font-weight: 600;">
              Bank Transfer - completed
            </p>
          </div>
          <br/>
          <div class="footer">
            <div>
              <p style="font-size: 10px;">
                www.centumworld.com
              </p>
              <p style="font-size: 10px;">
                worldcentum@gmail.com
              </p>
            </div>
            <div class="layout">
              <p style=" font-size: 10px; color: white">
                CENTUM WORLD
              </p>
              <P style=" font-size: 10px; color: white"
                >HSR Layout,Banglore 560102</P
              >
              <p style="font-size: 10px; color: white">
                Astra Tower,New Town,700136
              </p>
            </div>
          </div>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
<div *ngIf="checked" class="refferal-div">
  <mat-tab-group
    animationDuration="2000ms"
    class="example-stretched-tabs"
    (selectedIndexChange)="referralTabChange($event)"
  >
    <mat-tab label="Request">
      <div class="bakk-div">
        <mat-card
          class="example-card"
          *ngFor="let data of referralRequestHistory"
        >
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Bank details</mat-card-title>
          </mat-card-header>
          <mat-divider></mat-divider>
          <mat-card-content class="single-line-content">
            <div class="bank-details">
              <h2>Id</h2>
              <strong>{{ partnerID }} </strong>
            </div>
            <div class="bank-details">
              <h2>Amount</h2>
              <strong>{{
                data.partner_wallet | currency : "INR" : "symbol" : "1.2-2"
              }}</strong>
            </div>
            <div class="bank-details">
              <h2>Request date</h2>
              <strong>{{ data.request_date | date }} </strong>
            </div>
            <div class="bank-details">
              <h2>My team</h2>
              <strong>{{ data.reffer_p_userid }}</strong>
            </div>
          </mat-card-content>
          <mat-divider></mat-divider>
          <mat-card-actions>
            <button mat-button style="background: rgb(87, 251, 87)">
              Request
            </button>
            <button
              mat-button
              style="background: red"
              (click)="referralPayoutApproved(data.id)"
            >
              Approve
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </mat-tab>
    <mat-tab label="Approved">
      <div class="bakk-div">
        <mat-card class="example-card" *ngFor="let data of apprvedHistory">
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Bank details</mat-card-title>
          </mat-card-header>
          <mat-divider></mat-divider>
          <mat-card-content class="single-line-content">
            <div class="bank-details">
              <h2>Id</h2>
              <strong>{{ partnerID }} </strong>
            </div>
            <div class="bank-details">
              <h2>Amount</h2>
              <strong>{{
                data.partner_wallet | currency : "INR" : "symbol" : "1.2-2"
              }}</strong>
            </div>
            <div class="bank-details">
              <h2>Request date</h2>
              <strong>{{ data.request_date | date }} </strong>
            </div>
            <div class="bank-details">
              <h2>Approve date</h2>
              <strong>{{ data.approve_date | date }} </strong>
            </div>
            <div class="bank-details">
              <h2>My team</h2>
              <strong>{{ data.reffer_p_userid }}</strong>
            </div>
          </mat-card-content>
          <mat-divider></mat-divider>
          <mat-card-actions>
            <button mat-button style="background: rgb(87, 251, 87)">
              Approved successfully
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
