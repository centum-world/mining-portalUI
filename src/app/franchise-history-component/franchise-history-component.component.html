<div
  class="franchise-list-header"
  style="display: flex; justify-content: space-between; align-items: center"
>
  <div class="title">
    <h5
      style="
        display: flex;
        justify-content: center;
        align-items: center;
        width: max-content;
        gap: 20px;
      "
    >
      <mat-icon (click)="goBack()" style="cursor: pointer">arrow_back</mat-icon
      >&nbsp;Franchise details
    </h5>
  </div>
  <div class="search">
    <mat-form-field>
      <input
        matInput
        (keyup)="applyFilter($event.target.value)"
        placeholder="Search"
      />
    </mat-form-field>
  </div>
</div>
<div class="large-expand">
  <mat-tab-group
    animationDuration="2000ms"
    class="example-stretched-tabs"
    (selectedIndexChange)="tabChanged($event)"
  >
    <mat-tab label="Verified">
      <div class="mat-elevation-z8 table-container">
        <table
          mat-table
          [dataSource]="verifiedDataSource"
          class="mat-elevation-z8"
        >
          <!-- Position Column -->
          <ng-container matColumnDef="franchiseId">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Franchise ID
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.franchiseId }}
            </td>
          </ng-container>

          <ng-container matColumnDef="fname">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              F-Name
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.fname }}</td>
          </ng-container>

          <ng-container matColumnDef="lname">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              L-Name
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.lname }}</td>
          </ng-container>

          <ng-container matColumnDef="email">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Email
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.email }}</td>
          </ng-container>

          <ng-container matColumnDef="phone">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Phone
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.phone }}</td>
          </ng-container>

          <ng-container matColumnDef="gender">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Gender
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.gender }}</td>
          </ng-container>

          <ng-container matColumnDef="referralId">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Referral ID
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.referralId }}
            </td>
          </ng-container>

          <ng-container matColumnDef="franchiseState">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              State
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.franchiseState }}
            </td>
          </ng-container>

          <ng-container matColumnDef="franchiseCity">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              City
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.franchiseCity }}
            </td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Actions
            </th>
            <td mat-cell *matCellDef="let franchise">
              <!-- Use a mat-menu for more options -->
              <button mat-icon-button [matMenuTriggerFor]="menu">
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #menu="matMenu">
                <button
                  mat-menu-item
                  (click)="viewFranchiseDocument(franchise)"
                >
                  View
                </button>
                <button
                  mat-menu-item
                  [disabled]="franchise.isVerify === 1"
                  (click)="openVerifyDialog(franchise)"
                >
                  Verify
                </button>
                <button mat-menu-item (click)="openIsBlockDialog(franchise)">
                  {{ franchise.isBlocked === 0 ? "Block" : "Unblock" }}
                </button>
                <button
                  mat-menu-item
                  (click)="openEditFranchiseDialog(franchise)"
                >
                  Edit
                </button>
                <!-- <button mat-menu-item (click)=" Franchisedetails(franchise)">
                  Account
                </button> -->
                <!-- Add more options as needed -->
                <button mat-menu-item (click)=" openFranchiseTarget(franchise)">
                  Target
                </button>
              </mat-menu>
            </td>
          </ng-container>  

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr
            mat-row
            *matRowDef="let franchise; columns: displayedColumns"
          ></tr>
        </table>

        <mat-paginator
          #paginatorVerified
          [pageSize]="10"
          [pageSizeOptions]="[5, 10, 20]"
          [showFirstLastButtons]="true"
        ></mat-paginator>
      </div>
    </mat-tab>

    <mat-tab label="UnVerified">
      <div class="mat-elevation-z8 table-container">
        <table
          mat-table
          [dataSource]="unverifiedDataSource"
          class="mat-elevation-z8"
        >
          <!-- Position Column -->
          <ng-container matColumnDef="franchiseId">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Franchise ID
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.franchiseId }}
            </td>
          </ng-container>

          <ng-container matColumnDef="fname">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              F-Name
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.fname }}</td>
          </ng-container>

          <ng-container matColumnDef="lname">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              L-Name
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.lname }}</td>
          </ng-container>

          <ng-container matColumnDef="email">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Email
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.email }}</td>
          </ng-container>

          <ng-container matColumnDef="phone">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Phone
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.phone }}</td>
          </ng-container>

          <ng-container matColumnDef="gender">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Gender
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.gender }}</td>
          </ng-container>

          <ng-container matColumnDef="referralId">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Referral ID
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.referralId }}
            </td>
          </ng-container>

          <ng-container matColumnDef="franchiseState">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              State
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.franchiseState }}
            </td>
          </ng-container>

          <ng-container matColumnDef="franchiseCity">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              City
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.franchiseCity }}
            </td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Actions
            </th>
            <td mat-cell *matCellDef="let franchise">
              <!-- Use a mat-menu for more options -->
              <button mat-icon-button [matMenuTriggerFor]="menu">
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #menu="matMenu">
                <button
                  mat-menu-item
                  [disabled]="franchise.isVerify === 1"
                  (click)="openVerifyDialog(franchise)"
                >
                  Verify
                </button>
              </mat-menu>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr
            mat-row
            *matRowDef="let franchise; columns: displayedColumns"
          ></tr>
        </table>

        <mat-paginator
          #paginatorUnverified
          [pageSize]="10"
          [pageSizeOptions]="[5, 10, 20]"
          [showFirstLastButtons]="true"
        ></mat-paginator>
      </div>
    </mat-tab>

    <mat-tab label="UpGrade/DownGrade">
      <div class="mat-elevation-z8 table-container">
        <table
          mat-table
          [dataSource]="upgradeDowngradeDataSource"
          class="mat-elevation-z8"
        >
          <!-- Position Column -->
          <ng-container matColumnDef="franchiseId">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Franchise ID
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.franchiseId }}
            </td>
          </ng-container>

          <ng-container matColumnDef="fname">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              F-Name
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.fname }}</td>
          </ng-container>

          <ng-container matColumnDef="lname">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              L-Name
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.lname }}</td>
          </ng-container>

          <ng-container matColumnDef="email">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Email
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.email }}</td>
          </ng-container>

          <ng-container matColumnDef="phone">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Phone
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.phone }}</td>
          </ng-container>

          <ng-container matColumnDef="gender">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Gender
            </th>
            <td mat-cell *matCellDef="let franchise">{{ franchise.gender }}</td>
          </ng-container>

          <ng-container matColumnDef="referralId">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              Referral ID
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.referralId }}
            </td>
          </ng-container>

          <ng-container matColumnDef="franchiseState">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              State
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.franchiseState }}
            </td>
          </ng-container>

          <ng-container matColumnDef="franchiseCity">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              City
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.franchiseCity }}
            </td>
          </ng-container>

          <ng-container matColumnDef="userType">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="franchise-history-header"
            >
              UserType
            </th>
            <td mat-cell *matCellDef="let franchise">
              {{ franchise.userType }}
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="downgradeColumns"></tr>
          <tr
            mat-row
            *matRowDef="let franchise; columns: downgradeColumns"
          ></tr>
        </table>

        <mat-paginator
          #paginatorUpgradeDowngrade
          [pageSize]="10"
          [pageSizeOptions]="[5, 10, 20]"
          [showFirstLastButtons]="true"
        ></mat-paginator>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
